{"ast":null,"code":"import axios from 'axios';\n\n// Determine base URL: prefer explicit env; use same-origin \"/api\" in production; fallback to local dev\nconst resolvedBaseURL = process.env.REACT_APP_API_URL || (typeof window !== 'undefined' ? '/api' : 'http://localhost:5000/api');\n\n// Create axios instance with base configuration\nconst api = axios.create({\n  baseURL: resolvedBaseURL,\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Request interceptor to add auth token\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('authToken');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// Response interceptor to handle token refresh\napi.interceptors.response.use(response => {\n  return response;\n}, async error => {\n  var _error$response;\n  const originalRequest = error.config;\n  if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401 && !originalRequest._retry) {\n    originalRequest._retry = true;\n    try {\n      const refreshToken = localStorage.getItem('refreshToken');\n      if (refreshToken) {\n        const response = await axios.post(`${resolvedBaseURL}/auth/refresh`, {\n          refreshToken\n        });\n        const {\n          token\n        } = response.data;\n        localStorage.setItem('authToken', token);\n\n        // Retry the original request with new token\n        originalRequest.headers.Authorization = `Bearer ${token}`;\n        return api(originalRequest);\n      }\n    } catch (refreshError) {\n      // Refresh failed, redirect to login\n      localStorage.removeItem('authToken');\n      localStorage.removeItem('authUser');\n      window.location.href = '/login';\n      return Promise.reject(refreshError);\n    }\n  }\n  return Promise.reject(error);\n});\n\n// API methods\nexport const authAPI = {\n  login: credentials => api.post('/auth/login', credentials),\n  register: userData => api.post('/auth/register', userData),\n  logout: () => api.post('/auth/logout'),\n  refreshToken: refreshToken => api.post('/auth/refresh', {\n    refreshToken\n  }),\n  getCurrentUser: () => api.get('/auth/me'),\n  forgotPassword: email => api.post('/auth/forgot-password', {\n    email\n  }),\n  resetPassword: (token, password) => api.post('/auth/reset-password', {\n    token,\n    password\n  })\n};\nexport const appointmentAPI = {\n  getAll: () => api.get('/appointments'),\n  getById: id => api.get(`/appointments/${id}`),\n  create: appointmentData => api.post('/appointments', appointmentData),\n  update: (id, appointmentData) => api.put(`/appointments/${id}`, appointmentData),\n  cancel: id => api.put(`/appointments/${id}/cancel`),\n  reschedule: (id, newDateTime) => api.put(`/appointments/${id}/reschedule`, newDateTime),\n  getAvailableSlots: (practitionerId, date) => api.get(`/appointments/available-slots?practitionerId=${practitionerId}&date=${date}`)\n};\nexport const patientAPI = {\n  getProfile: () => api.get('/patient/profile'),\n  updateProfile: profileData => api.put('/patient/profile', profileData),\n  getProgress: () => api.get('/patient/progress'),\n  updateProgress: progressData => api.post('/patient/progress', progressData),\n  getTreatmentPlan: () => api.get('/patient/treatment-plan'),\n  getMedicalHistory: () => api.get('/patient/medical-history')\n};\nexport const practitionerAPI = {\n  getAll: () => api.get('/practitioners'),\n  getById: id => api.get(`/practitioners/${id}`),\n  getAvailability: (id, date) => api.get(`/practitioners/${id}/availability?date=${date}`),\n  getSpecializations: () => api.get('/practitioners/specializations')\n};\nexport const treatmentAPI = {\n  getAll: () => api.get('/treatments'),\n  getById: id => api.get(`/treatments/${id}`),\n  getByType: type => api.get(`/treatments?type=${type}`),\n  getProtocols: () => api.get('/treatments/protocols')\n};\nexport const notificationAPI = {\n  getAll: () => api.get('/notifications'),\n  markAsRead: id => api.put(`/notifications/${id}/read`),\n  markAllAsRead: () => api.put('/notifications/mark-all-read'),\n  delete: id => api.delete(`/notifications/${id}`),\n  getUnreadCount: () => api.get('/notifications/unread-count')\n};\nexport const aiSchedulingAPI = {\n  scheduleAppointment: appointmentRequest => api.post('/ai-scheduling/schedule', appointmentRequest),\n  getOptimalSlots: params => api.get('/ai-scheduling/optimal-slots', {\n    params\n  }),\n  rescheduleAppointment: (appointmentId, preferences) => api.put(`/ai-scheduling/reschedule/${appointmentId}`, preferences),\n  getInsights: (practitionerId, dateRange) => api.get(`/ai-scheduling/insights/${practitionerId}`, {\n    params: dateRange\n  })\n};\nexport default api;","map":{"version":3,"names":["axios","resolvedBaseURL","process","env","REACT_APP_API_URL","window","api","create","baseURL","timeout","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","error","Promise","reject","response","_error$response","originalRequest","status","_retry","refreshToken","post","data","setItem","refreshError","removeItem","location","href","authAPI","login","credentials","register","userData","logout","getCurrentUser","get","forgotPassword","email","resetPassword","password","appointmentAPI","getAll","getById","id","appointmentData","update","put","cancel","reschedule","newDateTime","getAvailableSlots","practitionerId","date","patientAPI","getProfile","updateProfile","profileData","getProgress","updateProgress","progressData","getTreatmentPlan","getMedicalHistory","practitionerAPI","getAvailability","getSpecializations","treatmentAPI","getByType","type","getProtocols","notificationAPI","markAsRead","markAllAsRead","delete","getUnreadCount","aiSchedulingAPI","scheduleAppointment","appointmentRequest","getOptimalSlots","params","rescheduleAppointment","appointmentId","preferences","getInsights","dateRange"],"sources":["C:/Users/tadik/Downloads/NavAyush_SIH-main/NavAyush_SIH-main/ayursutra/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\n// Determine base URL: prefer explicit env; use same-origin \"/api\" in production; fallback to local dev\nconst resolvedBaseURL = process.env.REACT_APP_API_URL || (typeof window !== 'undefined' ? '/api' : 'http://localhost:5000/api');\n\n// Create axios instance with base configuration\nconst api = axios.create({\n  baseURL: resolvedBaseURL,\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Request interceptor to add auth token\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('authToken');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor to handle token refresh\napi.interceptors.response.use(\n  (response) => {\n    return response;\n  },\n  async (error) => {\n    const originalRequest = error.config;\n\n    if (error.response?.status === 401 && !originalRequest._retry) {\n      originalRequest._retry = true;\n\n      try {\n        const refreshToken = localStorage.getItem('refreshToken');\n        if (refreshToken) {\n          const response = await axios.post(`${resolvedBaseURL}/auth/refresh`, { refreshToken });\n\n          const { token } = response.data;\n          localStorage.setItem('authToken', token);\n\n          // Retry the original request with new token\n          originalRequest.headers.Authorization = `Bearer ${token}`;\n          return api(originalRequest);\n        }\n      } catch (refreshError) {\n        // Refresh failed, redirect to login\n        localStorage.removeItem('authToken');\n        localStorage.removeItem('authUser');\n        window.location.href = '/login';\n        return Promise.reject(refreshError);\n      }\n    }\n\n    return Promise.reject(error);\n  }\n);\n\n// API methods\nexport const authAPI = {\n  login: (credentials) => api.post('/auth/login', credentials),\n  register: (userData) => api.post('/auth/register', userData),\n  logout: () => api.post('/auth/logout'),\n  refreshToken: (refreshToken) => api.post('/auth/refresh', { refreshToken }),\n  getCurrentUser: () => api.get('/auth/me'),\n  forgotPassword: (email) => api.post('/auth/forgot-password', { email }),\n  resetPassword: (token, password) => api.post('/auth/reset-password', { token, password }),\n};\n\nexport const appointmentAPI = {\n  getAll: () => api.get('/appointments'),\n  getById: (id) => api.get(`/appointments/${id}`),\n  create: (appointmentData) => api.post('/appointments', appointmentData),\n  update: (id, appointmentData) => api.put(`/appointments/${id}`, appointmentData),\n  cancel: (id) => api.put(`/appointments/${id}/cancel`),\n  reschedule: (id, newDateTime) => api.put(`/appointments/${id}/reschedule`, newDateTime),\n  getAvailableSlots: (practitionerId, date) => api.get(`/appointments/available-slots?practitionerId=${practitionerId}&date=${date}`),\n};\n\nexport const patientAPI = {\n  getProfile: () => api.get('/patient/profile'),\n  updateProfile: (profileData) => api.put('/patient/profile', profileData),\n  getProgress: () => api.get('/patient/progress'),\n  updateProgress: (progressData) => api.post('/patient/progress', progressData),\n  getTreatmentPlan: () => api.get('/patient/treatment-plan'),\n  getMedicalHistory: () => api.get('/patient/medical-history'),\n};\n\nexport const practitionerAPI = {\n  getAll: () => api.get('/practitioners'),\n  getById: (id) => api.get(`/practitioners/${id}`),\n  getAvailability: (id, date) => api.get(`/practitioners/${id}/availability?date=${date}`),\n  getSpecializations: () => api.get('/practitioners/specializations'),\n};\n\nexport const treatmentAPI = {\n  getAll: () => api.get('/treatments'),\n  getById: (id) => api.get(`/treatments/${id}`),\n  getByType: (type) => api.get(`/treatments?type=${type}`),\n  getProtocols: () => api.get('/treatments/protocols'),\n};\n\nexport const notificationAPI = {\n  getAll: () => api.get('/notifications'),\n  markAsRead: (id) => api.put(`/notifications/${id}/read`),\n  markAllAsRead: () => api.put('/notifications/mark-all-read'),\n  delete: (id) => api.delete(`/notifications/${id}`),\n  getUnreadCount: () => api.get('/notifications/unread-count'),\n};\n\nexport const aiSchedulingAPI = {\n  scheduleAppointment: (appointmentRequest) => api.post('/ai-scheduling/schedule', appointmentRequest),\n  getOptimalSlots: (params) => api.get('/ai-scheduling/optimal-slots', { params }),\n  rescheduleAppointment: (appointmentId, preferences) => api.put(`/ai-scheduling/reschedule/${appointmentId}`, preferences),\n  getInsights: (practitionerId, dateRange) => api.get(`/ai-scheduling/insights/${practitionerId}`, { params: dateRange }),\n};\n\nexport default api;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}